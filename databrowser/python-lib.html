
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Databrowser python module &#8212; Freva Databrowser 2408.0.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/code-tabs.css?v=1bc26e2f" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=88d57c38"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../_static/code-tabs.js?v=c983d12e"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'databrowser/python-lib';</script>
    <link rel="canonical" href="http://127.0.0.1:8000/databrowser/python-lib.html" />
    <link rel="icon" href="../_static/logo.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Databrowser Rest API" href="APIRef.html" />
    <link rel="prev" title="Search for data" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Freva Databrowser 2408.0.0 documentation - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Freva Databrowser 2408.0.0 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../auth/index.html">
    Authentication
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Search for data
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/FREVA-CLINT/freva-nextgen/freva-client" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../auth/index.html">
    Authentication
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Search for data
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/FREVA-CLINT/freva-nextgen/freva-client" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="current reference internal" href="#">Databrowser python module</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="APIRef.html">Databrowser Rest API</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="cli.html">The databrowser command line interface</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Search for data</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Databrowser...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="databrowser-python-module">
<h1>Databrowser python module<a class="headerlink" href="#databrowser-python-module" title="Link to this heading">#</a></h1>
<div class="toctree-wrapper compound" id="python-databrowser">
</div>
<p>The following section gives an overview over the usage of the databrowser
client python module. Please see the <a class="reference internal" href="../index.html#install-configure"><span class="std std-ref">Installation and configuration</span></a> section on how
to install and configure the library.</p>
<section id="tldr-too-long-didn-t-read">
<h2>TLDR: Too long didn’t read<a class="headerlink" href="#tldr-too-long-didn-t-read" title="Link to this heading">#</a></h2>
<p>To query data databrowser and search for data you have three different options.
You can the to following methods</p>
<ul class="simple">
<li><p><a class="reference internal" href="#freva_client.databrowser" title="freva_client.databrowser"><code class="xref py py-class docutils literal notranslate"><span class="pre">freva_client.databrowser</span></code></a>: The main class for searching data is the
<a class="reference internal" href="#freva_client.databrowser" title="freva_client.databrowser"><code class="xref py py-class docutils literal notranslate"><span class="pre">freva_client.databrowser</span></code></a> class. After creating in instance of the
databrowser class with your specific search constraints you can get retrieve
all <em>files</em> or <em>uris</em> that matching your search constraints. You can also
retrieve a count of the number objects matching the search, as well as
getting an overview over the available metadata and creating an intake-esm
catalogue from your search. Searching for <em>Uris</em> instead of <em>file</em> paths
can be useful to get information on the storage system where the <em>files</em>
or object stores are located.</p></li>
<li><p><a class="reference internal" href="#freva_client.databrowser.metadata_search" title="freva_client.databrowser.metadata_search"><code class="xref py py-meth docutils literal notranslate"><span class="pre">freva_client.databrowser.metadata_search()</span></code></a>: This class method lists
all search categories (facets) and their values.</p></li>
<li><p><a class="reference internal" href="#freva_client.databrowser.count_values" title="freva_client.databrowser.count_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">freva_client.databrowser.count_values()</span></code></a>: You can count the
occurrences of search results with this method.</p></li>
</ul>
</section>
<section id="library-reference">
<h2>Library Reference<a class="headerlink" href="#library-reference" title="Link to this heading">#</a></h2>
<p>Below you can find a more detailed documentation.</p>
<p id="module-freva_client">Client software freva evaluation system framework (freva):</p>
<p>Freva, the free evaluation system framework, is a data search and analysis
platform developed by the atmospheric science community for the atmospheric
science community. With help of Freva researchers can:</p>
<ul class="simple">
<li><p>quickly and intuitively search for data stored at typical data centers that
host many datasets.</p></li>
<li><p>create a common interface for user defined data analysis tools.</p></li>
<li><p>apply data analysis tools in a reproducible manner.</p></li>
</ul>
<p>The code described here is currently in testing phase. The client and server
library described in the documentation only support searching for data. If you
need to apply data analysis plugins, please visit the</p>
<dl class="py class">
<dt class="sig sig-object py" id="freva_client.databrowser">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">freva_client.</span></span><span class="sig-name descname"><span class="pre">databrowser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">facets</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uniq_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'file'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'uri'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'file'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flavour</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'freva'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'cmip6'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'cmip5'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'cordex'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'nextgems'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'freva'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_select</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'flexible'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'strict'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'file'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'flexible'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream_zarr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiversion</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fail_on_error</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">search_keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#freva_client.databrowser" title="Link to this definition">#</a></dt>
<dd><p>Find data in the system.</p>
<p>You can either search for files or uri’s. Uri’s give you an information
on the storage system where the files or objects you are looking for are
located. The query is of the form <code class="docutils literal notranslate"><span class="pre">key=value</span></code>. For <code class="docutils literal notranslate"><span class="pre">value</span></code> you might
use wild cards such as *, ? or any regular expression.</p>
<section id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Link to this heading">#</a></h3>
<dl class="simple">
<dt><a href="#id1"><span class="problematic" id="id2">*</span></a>facets: str</dt><dd><p>If you are not sure about the correct search key’s you can use
positional arguments to search of any matching entries. For example
‘era5’ would allow you to search for any entries
containing era5, regardless of project, product etc.</p>
</dd>
<dt><a href="#id3"><span class="problematic" id="id4">**</span></a>search_keys: str</dt><dd><p>The search constraints applied in the data search. If not given
the whole dataset will be queried.</p>
</dd>
<dt>flavour: str, default: freva</dt><dd><p>The Data Reference Syntax (DRS) standard specifying the type of climate
datasets to query. You can get an overview by using the
:py:meth:databrowser.overview class method to retrieve information
on the available search flavours and their different search keys.</p>
</dd>
<dt>time: str, default: “”</dt><dd><p>Special search key to refine/subset search results by time.
This can be a string representation of a time range or a single
timestamp. The timestamps has to follow ISO-8601. Valid strings are
<code class="docutils literal notranslate"><span class="pre">%Y-%m-%dT%H:%M</span> <span class="pre">to</span> <span class="pre">%Y-%m-%dT%H:%M</span></code> for time ranges or
<code class="docutils literal notranslate"><span class="pre">%Y-%m-%dT%H:%M</span></code> for single time stamps.
<strong>Note</strong>: You don’t have to give the full string format to subset
time steps: <cite>%Y</cite>, <cite>%Y-%m</cite> etc are also valid.</p>
</dd>
<dt>time_select: str, default: flexible</dt><dd><p>Operator that specifies how the time period is selected. Choose from
flexible (default), strict or file. <code class="docutils literal notranslate"><span class="pre">strict</span></code> returns only those files
that have the <cite>entire</cite> time period covered. The time search <code class="docutils literal notranslate"><span class="pre">2000</span> <span class="pre">to</span>
<span class="pre">2012</span></code> will not select files containing data from 2010 to 2020 with
the <code class="docutils literal notranslate"><span class="pre">strict</span></code> method. <code class="docutils literal notranslate"><span class="pre">flexible</span></code> will select those files as
<code class="docutils literal notranslate"><span class="pre">flexible</span></code> returns those files that have either start or end period
covered. <code class="docutils literal notranslate"><span class="pre">file</span></code> will only return files where the entire time
period is contained within <cite>one single</cite> file.</p>
</dd>
<dt>uniq_key: str, default: file</dt><dd><p>Chose if the solr search query should return paths to files or
uris, uris will have the file path along with protocol of the storage
system. Uris can be useful if the search query result should be
used libraries like fsspec.</p>
</dd>
<dt>host: str, default: None</dt><dd><p>Override the host name of the databrowser server. This is usually the
url where the freva web site can be found. Such as www.freva.dkrz.de.
By default no host name is given and the host name will be taken from
the freva config file.</p>
</dd>
<dt>stream_zarr: bool, default: False</dt><dd><p>Create a zarr stream for all search results. When set to true the
files are served in zarr format and can be opened from anywhere.</p>
</dd>
<dt>multiversion: bool, default: False</dt><dd><p>Select all versions and not just the latest version (default).</p>
</dd>
<dt>fail_on_error: bool, default: False</dt><dd><p>Make the call fail if the connection to the databrowser could not
be established.</p>
</dd>
</dl>
</section>
<section id="attributes">
<h3>Attributes<a class="headerlink" href="#attributes" title="Link to this heading">#</a></h3>
<dl class="simple">
<dt>url: str</dt><dd><p>the url of the currently selected databrowser api server</p>
</dd>
<dt>metadata: dict[str, str]</dt><dd><p>The available search keys, or metadata, found for the applied search
constraints. This can be useful for reverse searches.</p>
</dd>
</dl>
</section>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading">#</a></h3>
<p>Search for the cmorph datasets. Suppose we know that the experiment name
of this dataset is cmorph therefore we can create in instance of the
databrowser class using the <code class="docutils literal notranslate"><span class="pre">experiment</span></code> search constraint.
If you just ‘print’ the created object you will get a quick overview:</p>
<p><span class="caption-text">Code </span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">freva_client</span> <span class="kn">import</span> <span class="n">databrowser</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">databrowser</span><span class="p">(</span><span class="n">experiment</span><span class="o">=</span><span class="s2">&quot;cmorph&quot;</span><span class="p">,</span> <span class="n">uniq_key</span><span class="o">=</span><span class="s2">&quot;uri&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">db</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>databrowser(flavour=freva, host=http://localhost:7777/api/databrowser, multi_version=False, experiment=cmorph)
</pre></div>
</div>
<p>After having created the search object you can acquire different kinds of
information like the number of found objects:</p>
<p><span class="caption-text">Code </span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">freva_client</span> <span class="kn">import</span> <span class="n">databrowser</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">databrowser</span><span class="p">(</span><span class="n">experiment</span><span class="o">=</span><span class="s2">&quot;cmorph&quot;</span><span class="p">,</span> <span class="n">uniq_key</span><span class="o">=</span><span class="s2">&quot;uri&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">db</span><span class="p">))</span>
<span class="c1"># Get all the search keys associated with this search</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>49
</pre></div>
</div>
<p>Or you can retrieve the combined metadata of the search objects.</p>
<p><span class="caption-text">Code </span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">freva_client</span> <span class="kn">import</span> <span class="n">databrowser</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">databrowser</span><span class="p">(</span><span class="n">experiment</span><span class="o">=</span><span class="s2">&quot;cmorph&quot;</span><span class="p">,</span> <span class="n">uniq_key</span><span class="o">=</span><span class="s2">&quot;uri&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">metadata</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;cmor_table&#39;: [&#39;30min&#39;], &#39;dataset&#39;: [&#39;obs-fs&#39;, &#39;obs-hsm&#39;, &#39;obs-swfit&#39;], &#39;driving_model&#39;: [], &#39;ensemble&#39;: [&#39;r1i1p1&#39;], &#39;experiment&#39;: [&#39;cmorph&#39;], &#39;format&#39;: [&#39;nc&#39;, &#39;zarr&#39;], &#39;fs_type&#39;: [&#39;posix&#39;], &#39;grid_id&#39;: [], &#39;grid_label&#39;: [&#39;gn&#39;], &#39;institute&#39;: [&#39;cpc&#39;], &#39;level_type&#39;: [&#39;2d&#39;], &#39;model&#39;: [&#39;cpc&#39;, &#39;cpc-cmorph&#39;], &#39;product&#39;: [&#39;grid&#39;], &#39;project&#39;: [&#39;observations&#39;], &#39;rcm_name&#39;: [], &#39;rcm_version&#39;: [], &#39;realm&#39;: [&#39;atmos&#39;], &#39;time_aggregation&#39;: [&#39;mean&#39;], &#39;time_frequency&#39;: [&#39;1min&#39;], &#39;user&#39;: [], &#39;variable&#39;: [&#39;pr&#39;]}
</pre></div>
</div>
<p>Most importantly you can retrieve the locations of all encountered objects</p>
<p><span class="caption-text">Code </span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">freva_client</span> <span class="kn">import</span> <span class="n">databrowser</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">databrowser</span><span class="p">(</span><span class="n">experiment</span><span class="o">=</span><span class="s2">&quot;cmorph&quot;</span><span class="p">,</span> <span class="n">uniq_key</span><span class="o">=</span><span class="s2">&quot;uri&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">db</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="n">all_files</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">db</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">all_files</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/home/runner/work/freva-nextgen/freva-nextgen/freva-rest/src/databrowser_api/mock/data/observations/grid/CPC/CPC/cmorph/30min/atmos/30min/r1i1p1/v20210618/pr/pr_30min_CPC_cmorph_r1i1p1_201609020000-201609020030.nc
</pre></div>
</div>
<p>You can also set a different flavour, for example according to cmip6
standard:</p>
<p><span class="caption-text">Code </span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">freva_client</span> <span class="kn">import</span> <span class="n">databrowser</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">databrowser</span><span class="p">(</span><span class="n">flavour</span><span class="o">=</span><span class="s2">&quot;cmip6&quot;</span><span class="p">,</span> <span class="n">experiment_id</span><span class="o">=</span><span class="s2">&quot;cmorph&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">metadata</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;table_id&#39;: [&#39;30min&#39;], &#39;dataset&#39;: [&#39;obs-fs&#39;, &#39;obs-hsm&#39;, &#39;obs-swfit&#39;], &#39;driving_model&#39;: [], &#39;member_id&#39;: [&#39;r1i1p1&#39;], &#39;experiment_id&#39;: [&#39;cmorph&#39;], &#39;format&#39;: [&#39;nc&#39;, &#39;zarr&#39;], &#39;fs_type&#39;: [&#39;posix&#39;], &#39;grid_id&#39;: [], &#39;grid_label&#39;: [&#39;gn&#39;], &#39;institution_id&#39;: [&#39;cpc&#39;], &#39;level_type&#39;: [&#39;2d&#39;], &#39;source_id&#39;: [&#39;cpc&#39;, &#39;cpc-cmorph&#39;], &#39;activity_id&#39;: [&#39;grid&#39;], &#39;mip_era&#39;: [&#39;observations&#39;], &#39;rcm_name&#39;: [], &#39;rcm_version&#39;: [], &#39;realm&#39;: [&#39;atmos&#39;], &#39;time_aggregation&#39;: [&#39;mean&#39;], &#39;frequency&#39;: [&#39;1min&#39;], &#39;user&#39;: [], &#39;variable_id&#39;: [&#39;pr&#39;]}
</pre></div>
</div>
<p>Sometimes you don’t exactly know the exact names of the search keys and
want retrieve all file objects that match a certain category. For example
for getting all ocean reanalysis datasets you can apply the ‘reana*’
search key as a positional argument:</p>
<p><span class="caption-text">Code </span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">freva_client</span> <span class="kn">import</span> <span class="n">databrowser</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">databrowser</span><span class="p">(</span><span class="s2">&quot;reana*&quot;</span><span class="p">,</span> <span class="n">realm</span><span class="o">=</span><span class="s2">&quot;ocean&quot;</span><span class="p">,</span> <span class="n">flavour</span><span class="o">=</span><span class="s2">&quot;cmip6&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">db</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>https://swift.dkrz.de/v1/dkrz_a32dc0e8-2299-4239-a47d-6bf45c8b0160/freva_test/model/obs/reanalysis/reanalysis/NOAA/NODC/OC5/mon/ocean/Omon/r1i1p1/v20200101/hc700/hc700_mon_NODC_OC5_r1i1p1_201201-201212.zarr
/home/runner/work/freva-nextgen/freva-nextgen/freva-rest/src/databrowser_api/mock/data/model/obs/reanalysis/reanalysis/NOAA/NODC/OC5/mon/ocean/Omon/r1i1p1/v20200101/hc700/hc700_mon_NODC_OC5_r1i1p1_201201-201212.nc
/arch/bb1203/freva_test/model/obs/reanalysis/reanalysis/NOAA/NODC/OC5/mon/ocean/Omon/r1i1p1/v20200101/hc700/hc700_mon_NODC_OC5_r1i1p1_201201-201212.nc
</pre></div>
</div>
<p>If you don’t have direct access to the data, for example because you are
not directly logged in to the computer where the data is stored you can
set <code class="docutils literal notranslate"><span class="pre">stream_zarr=True</span></code>. The data will then be
provisioned in zarr format and can be opened from anywhere. But bear in
mind that zarr streams if not accessed in time will expire. Since the
data can be accessed from anywhere you will also have to authenticate
before you are able to access the data. Refer also to the
<a class="reference internal" href="../auth/index.html#freva_client.authenticate" title="freva_client.authenticate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">freva_client.authenticate()</span></code></a> method.</p>
<p><span class="caption-text">Code </span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">freva_client</span> <span class="kn">import</span> <span class="n">authenticate</span><span class="p">,</span> <span class="n">databrowser</span>
<span class="n">token_info</span> <span class="o">=</span> <span class="n">authenticate</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;janedoe&quot;</span><span class="p">)</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">databrowser</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="s2">&quot;cmip6-fs&quot;</span><span class="p">,</span> <span class="n">stream_zarr</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">zarr_files</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">db</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">zarr_files</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[&#39;http://localhost:7777/api/freva-data-portal/zarr/c48f9024-f61e-5682-9651-7b9a21d81048.zarr&#39;, &#39;http://localhost:7777/api/freva-data-portal/zarr/ff8b9acf-b652-5ce3-a26c-58f9bc4884a3.zarr&#39;]
</pre></div>
</div>
<p>After you have created the paths to the zarr files you can open them</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="n">dset</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span>
   <span class="n">zarr_files</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
   <span class="n">chunks</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">,</span>
   <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;zarr&quot;</span><span class="p">,</span>
   <span class="n">storage_options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;header&quot;</span><span class="p">:</span>
        <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Bearer </span><span class="si">{</span><span class="n">token_info</span><span class="p">[</span><span class="s1">&#39;access_token&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}</span>
   <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="freva_client.databrowser.count_values">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">count_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">facets</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flavour</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'freva'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'cmip6'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'cmip5'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'cordex'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'nextgems'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'freva'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_select</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'flexible'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'strict'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'file'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'flexible'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiversion</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fail_on_error</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extended_search</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">search_keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#freva_client.databrowser.count_values" title="Link to this definition">#</a></dt>
<dd><p>Count the number of objects in the databrowser.</p>
<section id="id5">
<h4>Parameters<a class="headerlink" href="#id5" title="Link to this heading">#</a></h4>
<dl class="simple">
<dt><a href="#id6"><span class="problematic" id="id7">*</span></a>facets: str</dt><dd><p>If you are not sure about the correct search key’s you can use
positional arguments to search of any matching entries. For example
‘era5’ would allow you to search for any entries
containing era5, regardless of project, product etc.</p>
</dd>
<dt>flavour: str, default: freva</dt><dd><p>The Data Reference Syntax (DRS) standard specifying the type of climate
datasets to query.</p>
</dd>
<dt>time: str, default: “”</dt><dd><p>Special search facet to refine/subset search results by time.
This can be a string representation of a time range or a single
timestamp. The timestamp has to follow ISO-8601. Valid strings are
<code class="docutils literal notranslate"><span class="pre">%Y-%m-%dT%H:%M</span></code> to <code class="docutils literal notranslate"><span class="pre">%Y-%m-%dT%H:%M</span></code> for time ranges and
<code class="docutils literal notranslate"><span class="pre">%Y-%m-%dT%H:%M</span></code>. <strong>Note</strong>: You don’t have to give the full string
format to subset time steps <code class="docutils literal notranslate"><span class="pre">%Y</span></code>, <code class="docutils literal notranslate"><span class="pre">%Y-%m</span></code> etc are also valid.</p>
</dd>
<dt>time_select: str, default: flexible</dt><dd><p>Operator that specifies how the time period is selected. Choose from
flexible (default), strict or file. <code class="docutils literal notranslate"><span class="pre">strict</span></code> returns only those files
that have the <em>entire</em> time period covered. The time search <code class="docutils literal notranslate"><span class="pre">2000</span> <span class="pre">to</span>
<span class="pre">2012</span></code> will not select files containing data from 2010 to 2020 with
the <code class="docutils literal notranslate"><span class="pre">strict</span></code> method. <code class="docutils literal notranslate"><span class="pre">flexible</span></code> will select those files as
<code class="docutils literal notranslate"><span class="pre">flexible</span></code> returns those files that have either start or end period
covered. <code class="docutils literal notranslate"><span class="pre">file</span></code> will only return files where the entire time
period is contained within <cite>one single</cite> file.</p>
</dd>
<dt>extended_search: bool, default: False</dt><dd><p>Retrieve information on additional search keys.</p>
</dd>
<dt>host: str, default: None</dt><dd><p>Override the host name of the databrowser server. This is usually
the url where the freva web site can be found. Such as
www.freva.dkrz.de. By default no host name is given and the host
name will be taken from the freva config file.</p>
</dd>
<dt>multiversion: bool, default: False</dt><dd><p>Select all versions and not just the latest version (default).</p>
</dd>
<dt>fail_on_error: bool, default: False</dt><dd><p>Make the call fail if the connection to the databrowser could not</p>
</dd>
<dt><a href="#id8"><span class="problematic" id="id9">**</span></a>search_keys: str</dt><dd><p>The search constraints to be applied in the data search. If not given
the whole dataset will be queried.</p>
</dd>
</dl>
</section>
<section id="returns">
<h4>Returns<a class="headerlink" href="#returns" title="Link to this heading">#</a></h4>
<dl class="simple">
<dt>dict[str, int]:</dt><dd><p>Dictionary with the number of objects for each search facet/key
is given.</p>
</dd>
</dl>
</section>
<section id="id10">
<h4>Example<a class="headerlink" href="#id10" title="Link to this heading">#</a></h4>
<p><span class="caption-text">Code </span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">freva_client</span> <span class="kn">import</span> <span class="n">databrowser</span>
<span class="nb">print</span><span class="p">(</span><span class="n">databrowser</span><span class="o">.</span><span class="n">count_values</span><span class="p">(</span><span class="n">experiment</span><span class="o">=</span><span class="s2">&quot;cmorph&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;ensemble&#39;: {&#39;r1i1p1&#39;: 49}, &#39;experiment&#39;: {&#39;cmorph&#39;: 49}, &#39;institute&#39;: {&#39;cpc&#39;: 49}, &#39;model&#39;: {&#39;cpc&#39;: 25, &#39;cpc-cmorph&#39;: 24}, &#39;product&#39;: {&#39;grid&#39;: 49}, &#39;project&#39;: {&#39;observations&#39;: 49}, &#39;realm&#39;: {&#39;atmos&#39;: 49}, &#39;time_aggregation&#39;: {&#39;mean&#39;: 49}, &#39;time_frequency&#39;: {&#39;1min&#39;: 49}, &#39;variable&#39;: {&#39;pr&#39;: 49}}
</pre></div>
</div>
<p><span class="caption-text">Code </span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">freva_client</span> <span class="kn">import</span> <span class="n">databrowser</span>
<span class="nb">print</span><span class="p">(</span><span class="n">databrowser</span><span class="o">.</span><span class="n">count_values</span><span class="p">(</span><span class="s2">&quot;model&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;ensemble&#39;: {}, &#39;experiment&#39;: {}, &#39;institute&#39;: {}, &#39;model&#39;: {}, &#39;product&#39;: {}, &#39;project&#39;: {}, &#39;realm&#39;: {}, &#39;time_aggregation&#39;: {}, &#39;time_frequency&#39;: {}, &#39;variable&#39;: {}}
</pre></div>
</div>
<p>Sometimes you don’t exactly know the exact names of the search keys and
want retrieve all file objects that match a certain category. For
example for getting all ocean reanalysis datasets you can apply the
‘reana*’ search key as a positional argument:</p>
<p><span class="caption-text">Code </span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">freva_client</span> <span class="kn">import</span> <span class="n">databrowser</span>
<span class="nb">print</span><span class="p">(</span><span class="n">databrowser</span><span class="o">.</span><span class="n">count_values</span><span class="p">(</span><span class="s2">&quot;reana*&quot;</span><span class="p">,</span> <span class="n">realm</span><span class="o">=</span><span class="s2">&quot;ocean&quot;</span><span class="p">,</span> <span class="n">flavour</span><span class="o">=</span><span class="s2">&quot;cmip6&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;member_id&#39;: {&#39;r1i1p1&#39;: 3}, &#39;experiment_id&#39;: {&#39;oc5&#39;: 3}, &#39;institution_id&#39;: {&#39;noaa&#39;: 3}, &#39;source_id&#39;: {&#39;nodc&#39;: 3}, &#39;activity_id&#39;: {&#39;reanalysis&#39;: 3}, &#39;mip_era&#39;: {&#39;observations&#39;: 3}, &#39;realm&#39;: {&#39;ocean&#39;: 3}, &#39;time_aggregation&#39;: {&#39;mean&#39;: 3}, &#39;frequency&#39;: {&#39;mon&#39;: 3}, &#39;variable_id&#39;: {&#39;hc700&#39;: 3}}
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="freva_client.databrowser.intake_catalogue">
<span class="sig-name descname"><span class="pre">intake_catalogue</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">esm_datastore</span></span></span><a class="headerlink" href="#freva_client.databrowser.intake_catalogue" title="Link to this definition">#</a></dt>
<dd><p>Create an intake esm catalogue object from the search.</p>
<p>This method creates a intake-esm catalogue from the current object
search. Instead of having the original files as target objects you can
also choose to stream the files via zarr.</p>
<section id="id11">
<h4>Returns<a class="headerlink" href="#id11" title="Link to this heading">#</a></h4>
<p>intake_esm.core.esm_datastore: intake-esm catalogue.</p>
</section>
<section id="raises">
<h4>Raises<a class="headerlink" href="#raises" title="Link to this heading">#</a></h4>
<p>ValueError: If user is not authenticated or catalogue creation failed.</p>
</section>
<section id="id12">
<h4>Example<a class="headerlink" href="#id12" title="Link to this heading">#</a></h4>
<p>Let’s create an intake-esm catalogue that points points allows for
streaming the target data as zarr:</p>
<p><span class="caption-text">Code </span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">freva_client</span> <span class="kn">import</span> <span class="n">databrowser</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">databrowser</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="s2">&quot;cmip6-fs&quot;</span><span class="p">,</span> <span class="n">stream_zarr</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">cat</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">intake_catalogue</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                                                 uri project  ... fs_type grid_label
0  http://localhost:7777/api/freva-data-portal/za...   CMIP6  ...   posix         gn
1  http://localhost:7777/api/freva-data-portal/za...   CMIP6  ...   posix         gn

[2 rows x 13 columns]
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="freva_client.databrowser.metadata">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">metadata</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#freva_client.databrowser.metadata" title="Link to this definition">#</a></dt>
<dd><p>Get the metadata (facets) for the current databrowser query.</p>
<p>You can retrieve all information that is associated with your current
databrowser search. This can be useful for reverse searches for example
for retrieving metadata of object stores or file/directory names.</p>
<section id="id13">
<h4>Example<a class="headerlink" href="#id13" title="Link to this heading">#</a></h4>
<p>Reverse search: retrieving meta data from a known file</p>
<p><span class="caption-text">Code </span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">freva_client</span> <span class="kn">import</span> <span class="n">databrowser</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">databrowser</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;slk:///arch/*/CPC/*&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">metadata</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;cmor_table&#39;: [&#39;30min&#39;], &#39;dataset&#39;: [&#39;obs-hsm&#39;], &#39;driving_model&#39;: [], &#39;ensemble&#39;: [&#39;r1i1p1&#39;], &#39;experiment&#39;: [&#39;cmorph&#39;], &#39;format&#39;: [&#39;nc&#39;], &#39;fs_type&#39;: [&#39;posix&#39;], &#39;grid_id&#39;: [], &#39;grid_label&#39;: [&#39;gn&#39;], &#39;institute&#39;: [&#39;cpc&#39;], &#39;level_type&#39;: [&#39;2d&#39;], &#39;model&#39;: [&#39;cpc&#39;], &#39;product&#39;: [&#39;grid&#39;], &#39;project&#39;: [&#39;observations&#39;], &#39;rcm_name&#39;: [], &#39;rcm_version&#39;: [], &#39;realm&#39;: [&#39;atmos&#39;], &#39;time_aggregation&#39;: [&#39;mean&#39;], &#39;time_frequency&#39;: [&#39;1min&#39;], &#39;user&#39;: [], &#39;variable&#39;: [&#39;pr&#39;]}
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="freva_client.databrowser.metadata_search">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">metadata_search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">facets</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flavour</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'freva'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'cmip6'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'cmip5'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'cordex'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'nextgems'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'freva'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_select</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'flexible'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'strict'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'file'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'flexible'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiversion</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fail_on_error</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extended_search</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">search_keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#freva_client.databrowser.metadata_search" title="Link to this definition">#</a></dt>
<dd><p>Search for data attributes (facets) in the databrowser.</p>
<p>The method queries the databrowser for available search facets (keys)
like model, experiment etc.</p>
<section id="id14">
<h4>Parameters<a class="headerlink" href="#id14" title="Link to this heading">#</a></h4>
<dl class="simple">
<dt><a href="#id15"><span class="problematic" id="id16">*</span></a>facets: str</dt><dd><p>If you are not sure about the correct search key’s you can use
positional arguments to search of any matching entries. For example
‘era5’ would allow you to search for any entries
containing era5, regardless of project, product etc.</p>
</dd>
<dt>flavour: str, default: freva</dt><dd><p>The Data Reference Syntax (DRS) standard specifying the type of climate
datasets to query.</p>
</dd>
<dt>time: str, default: “”</dt><dd><p>Special search facet to refine/subset search results by time.
This can be a string representation of a time range or a single
timestamp. The timestamp has to follow ISO-8601. Valid strings are
<code class="docutils literal notranslate"><span class="pre">%Y-%m-%dT%H:%M</span></code> to <code class="docutils literal notranslate"><span class="pre">%Y-%m-%dT%H:%M</span></code> for time ranges and
<code class="docutils literal notranslate"><span class="pre">%Y-%m-%dT%H:%M</span></code>. <strong>Note</strong>: You don’t have to give the full string
format to subset time steps <code class="docutils literal notranslate"><span class="pre">%Y</span></code>, <code class="docutils literal notranslate"><span class="pre">%Y-%m</span></code> etc are also valid.</p>
</dd>
<dt>time_select: str, default: flexible</dt><dd><p>Operator that specifies how the time period is selected. Choose from
flexible (default), strict or file. <code class="docutils literal notranslate"><span class="pre">strict</span></code> returns only those files
that have the <em>entire</em> time period covered. The time search <code class="docutils literal notranslate"><span class="pre">2000</span> <span class="pre">to</span>
<span class="pre">2012</span></code> will not select files containing data from 2010 to 2020 with
the <code class="docutils literal notranslate"><span class="pre">strict</span></code> method. <code class="docutils literal notranslate"><span class="pre">flexible</span></code> will select those files as
<code class="docutils literal notranslate"><span class="pre">flexible</span></code> returns those files that have either start or end period
covered. <code class="docutils literal notranslate"><span class="pre">file</span></code> will only return files where the entire time
period is contained within <em>one single</em> file.</p>
</dd>
<dt>extended_search: bool, default: False</dt><dd><p>Retrieve information on additional search keys.</p>
</dd>
<dt>multiversion: bool, default: False</dt><dd><p>Select all versions and not just the latest version (default).</p>
</dd>
<dt>host: str, default: None</dt><dd><p>Override the host name of the databrowser server. This is usually
the url where the freva web site can be found. Such as
www.freva.dkrz.de. By default no host name is given and the host
name will be taken from the freva config file.</p>
</dd>
<dt>fail_on_error: bool, default: False</dt><dd><p>Make the call fail if the connection to the databrowser could not</p>
</dd>
<dt><a href="#id17"><span class="problematic" id="id18">**</span></a>search_keys: str, list[str]</dt><dd><p>The facets to be applied in the data search. If not given
the whole dataset will be queried.</p>
</dd>
</dl>
</section>
<section id="id19">
<h4>Returns<a class="headerlink" href="#id19" title="Link to this heading">#</a></h4>
<dl class="simple">
<dt>dict[str, list[str]]:</dt><dd><p>Dictionary with a list search facet values for each search facet key</p>
</dd>
</dl>
</section>
<section id="id20">
<h4>Example<a class="headerlink" href="#id20" title="Link to this heading">#</a></h4>
<p><span class="caption-text">Code </span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">freva_client</span> <span class="kn">import</span> <span class="n">databrowser</span>
<span class="n">all_facets</span> <span class="o">=</span> <span class="n">databrowser</span><span class="o">.</span><span class="n">metadata_search</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="s1">&#39;obs*&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">all_facets</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;ensemble&#39;: [&#39;r1i1p1&#39;], &#39;experiment&#39;: [&#39;cmorph&#39;, &#39;oc5&#39;], &#39;institute&#39;: [&#39;cpc&#39;, &#39;noaa&#39;], &#39;model&#39;: [&#39;cpc&#39;, &#39;cpc-cmorph&#39;, &#39;nodc&#39;], &#39;product&#39;: [&#39;grid&#39;, &#39;reanalysis&#39;], &#39;project&#39;: [&#39;observations&#39;], &#39;realm&#39;: [&#39;atmos&#39;, &#39;ocean&#39;], &#39;time_aggregation&#39;: [&#39;mean&#39;], &#39;time_frequency&#39;: [&#39;1min&#39;, &#39;mon&#39;], &#39;variable&#39;: [&#39;hc700&#39;, &#39;pr&#39;]}
</pre></div>
</div>
<p>You can also search for all metadata matching a search string:</p>
<p><span class="caption-text">Code </span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">freva_client</span> <span class="kn">import</span> <span class="n">databrowser</span>
<span class="n">spec_facets</span> <span class="o">=</span> <span class="n">databrowser</span><span class="o">.</span><span class="n">metadata_search</span><span class="p">(</span><span class="s2">&quot;obs*&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">spec_facets</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;ensemble&#39;: [&#39;r1i1p1&#39;], &#39;experiment&#39;: [&#39;cmorph&#39;], &#39;institute&#39;: [&#39;cpc&#39;], &#39;model&#39;: [&#39;cpc&#39;, &#39;cpc-cmorph&#39;], &#39;product&#39;: [&#39;grid&#39;], &#39;project&#39;: [&#39;observations&#39;], &#39;realm&#39;: [&#39;atmos&#39;], &#39;time_aggregation&#39;: [&#39;mean&#39;], &#39;time_frequency&#39;: [&#39;1min&#39;], &#39;variable&#39;: [&#39;pr&#39;]}
</pre></div>
</div>
<p>Get all models that have a given time step:</p>
<p><span class="caption-text">Code </span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">freva_client</span> <span class="kn">import</span> <span class="n">databrowser</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">databrowser</span><span class="o">.</span><span class="n">metadata_search</span><span class="p">(</span>
    <span class="n">project</span><span class="o">=</span><span class="s2">&quot;obs*&quot;</span><span class="p">,</span>
    <span class="n">time</span><span class="o">=</span><span class="s2">&quot;2016-09-02T22:10&quot;</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;ensemble&#39;: [&#39;r1i1p1&#39;], &#39;experiment&#39;: [&#39;cmorph&#39;], &#39;institute&#39;: [&#39;cpc&#39;], &#39;model&#39;: [&#39;cpc&#39;, &#39;cpc-cmorph&#39;], &#39;product&#39;: [&#39;grid&#39;], &#39;project&#39;: [&#39;observations&#39;], &#39;realm&#39;: [&#39;atmos&#39;], &#39;time_aggregation&#39;: [&#39;mean&#39;], &#39;time_frequency&#39;: [&#39;1min&#39;], &#39;variable&#39;: [&#39;pr&#39;]}
</pre></div>
</div>
<p>Reverse search: retrieving meta data from a known file</p>
<p><span class="caption-text">Code </span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">freva_client</span> <span class="kn">import</span> <span class="n">databrowser</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">databrowser</span><span class="o">.</span><span class="n">metadata_search</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s2">&quot;/arch/*CPC/*&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;ensemble&#39;: [&#39;r1i1p1&#39;], &#39;experiment&#39;: [&#39;cmorph&#39;], &#39;institute&#39;: [&#39;cpc&#39;], &#39;model&#39;: [&#39;cpc&#39;], &#39;product&#39;: [&#39;grid&#39;], &#39;project&#39;: [&#39;observations&#39;], &#39;realm&#39;: [&#39;atmos&#39;], &#39;time_aggregation&#39;: [&#39;mean&#39;], &#39;time_frequency&#39;: [&#39;1min&#39;], &#39;variable&#39;: [&#39;pr&#39;]}
</pre></div>
</div>
<p>Sometimes you don’t exactly know the exact names of the search keys and
want retrieve all file objects that match a certain category. For
example for getting all ocean reanalysis datasets you can apply the
‘reana*’ search key as a positional argument:</p>
<p><span class="caption-text">Code </span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">freva_client</span> <span class="kn">import</span> <span class="n">databrowser</span>
<span class="nb">print</span><span class="p">(</span><span class="n">databrowser</span><span class="o">.</span><span class="n">metadata_search</span><span class="p">(</span><span class="s2">&quot;reana*&quot;</span><span class="p">,</span> <span class="n">realm</span><span class="o">=</span><span class="s2">&quot;ocean&quot;</span><span class="p">,</span> <span class="n">flavour</span><span class="o">=</span><span class="s2">&quot;cmip6&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;member_id&#39;: [&#39;r1i1p1&#39;], &#39;experiment_id&#39;: [&#39;oc5&#39;], &#39;institution_id&#39;: [&#39;noaa&#39;], &#39;source_id&#39;: [&#39;nodc&#39;], &#39;activity_id&#39;: [&#39;reanalysis&#39;], &#39;mip_era&#39;: [&#39;observations&#39;], &#39;realm&#39;: [&#39;ocean&#39;], &#39;time_aggregation&#39;: [&#39;mean&#39;], &#39;frequency&#39;: [&#39;mon&#39;], &#39;variable_id&#39;: [&#39;hc700&#39;]}
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="freva_client.databrowser.overview">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">overview</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#freva_client.databrowser.overview" title="Link to this definition">#</a></dt>
<dd><p>Get an overview over the available search options.</p>
<p>If you don’t know what search flavours or search keys you can use
for searching the data you can use this method to get an overview
over what is available.</p>
<section id="id21">
<h4>Parameters<a class="headerlink" href="#id21" title="Link to this heading">#</a></h4>
<dl class="simple">
<dt>host: str, default None</dt><dd><p>Override the host name of the databrowser server. This is usually
the url where the freva web site can be found. Such as
www.freva.dkrz.de. By default no host name is given and the host
name will be taken from the freva config file.</p>
</dd>
</dl>
</section>
<section id="id22">
<h4>Returns<a class="headerlink" href="#id22" title="Link to this heading">#</a></h4>
<p>str: A string representation over what is available.</p>
</section>
<section id="id23">
<h4>Example<a class="headerlink" href="#id23" title="Link to this heading">#</a></h4>
<p><span class="caption-text">Code </span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">freva_client</span> <span class="kn">import</span> <span class="n">databrowser</span>
<span class="nb">print</span><span class="p">(</span><span class="n">databrowser</span><span class="o">.</span><span class="n">overview</span><span class="p">())</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Available search flavours:
- freva
- cmip6
- cmip5
- cordex
- nextgems
Search attributes by flavour:
  cmip5:
  - experiment
  - member_id
  - fs_type
  - grid_label
  - institution_id
  - model_id
  - project
  - product
  - realm
  - variable
  - time
  - time_aggregation
  - time_frequency
  - cmor_table
  - dataset
  - format
  - grid_id
  - level_type
  cmip6:
  - experiment_id
  - member_id
  - fs_type
  - grid_label
  - institution_id
  - source_id
  - mip_era
  - activity_id
  - realm
  - variable_id
  - time
  - time_aggregation
  - frequency
  - table_id
  - dataset
  - format
  - grid_id
  - level_type
  cordex:
  - experiment
  - ensemble
  - fs_type
  - grid_label
  - institution
  - model
  - project
  - domain
  - realm
  - variable
  - time
  - time_aggregation
  - time_frequency
  - cmor_table
  - dataset
  - driving_model
  - format
  - grid_id
  - level_type
  - rcm_name
  - rcm_version
  freva:
  - project
  - product
  - institute
  - model
  - experiment
  - time_frequency
  - realm
  - variable
  - ensemble
  - time_aggregation
  - fs_type
  - grid_label
  - cmor_table
  - format
  - grid_id
  - level_type
  - dataset
  - time
  nextgems:
  - experiment
  - member_id
  - fs_type
  - grid_label
  - institution_id
  - source_id
  - project
  - experiment_id
  - realm
  - variable_id
  - time
  - time_reduction
  - time_frequency
  - cmor_table
  - dataset
  - format
  - grid_id
  - level_type

</pre></div>
</div>
</section>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="freva_client.databrowser.url">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">url</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#freva_client.databrowser.url" title="Link to this definition">#</a></dt>
<dd><p>Get the url of the databrowser API.</p>
<section id="id24">
<h4>Example<a class="headerlink" href="#id24" title="Link to this heading">#</a></h4>
<p><span class="caption-text">Code </span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">freva_client</span> <span class="kn">import</span> <span class="n">databrowser</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">databrowser</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="caption-text">Results</span></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>http://localhost:7777/api/databrowser
</pre></div>
</div>
</section>
</dd></dl>

</section>
</dd></dl>

</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Search for data</p>
      </div>
    </a>
    <a class="right-next"
       href="APIRef.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Databrowser Rest API</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tldr-too-long-didn-t-read">TLDR: Too long didn’t read</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#library-reference">Library Reference</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#freva_client.databrowser"><code class="docutils literal notranslate"><span class="pre">databrowser</span></code></a><ul class="visible nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#freva_client.databrowser.count_values"><code class="docutils literal notranslate"><span class="pre">databrowser.count_values()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#freva_client.databrowser.intake_catalogue"><code class="docutils literal notranslate"><span class="pre">databrowser.intake_catalogue()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#freva_client.databrowser.metadata"><code class="docutils literal notranslate"><span class="pre">databrowser.metadata</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#freva_client.databrowser.metadata_search"><code class="docutils literal notranslate"><span class="pre">databrowser.metadata_search()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#freva_client.databrowser.overview"><code class="docutils literal notranslate"><span class="pre">databrowser.overview()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#freva_client.databrowser.url"><code class="docutils literal notranslate"><span class="pre">databrowser.url</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, DKRZ.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.0.2.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>